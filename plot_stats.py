import matplotlib.pyplot as plt
from matplotlib.collections import EventCollection
import numpy as np




# avg = [[2.010624535379962e-05, 1.0656701879166711e-05, 9.854565610400319e-06, 1.0468966534229665e-05, 7.765673814168674e-06, 9.785124853607777e-06, 1.0529632273691264e-05, 1.4285852951963218e-05, 1.1333283229075504e-05, 1.0821549077628036e-05,
#         9.879127583759494e-06, 1.0106500179161599e-05, 1.3136192791783246e-05, 1.0725720446604208e-05, 9.639057056735098e-06, 1.206964434011144e-05, 8.786681691765658e-06, 8.042114979133494e-06, 1.1546507581030505e-05, 1.2382607992148144e-05, 0.004601154474516015]]

# diversity = [[1.0, 0.9866666666666667, 0.98, 0.98, 0.97, 0.9633333333333334, 0.9733333333333334, 0.9666666666666667, 0.9633333333333334, 0.9533333333333334, 0.9833333333333333,
#               0.98, 0.9566666666666667, 0.9733333333333334, 0.9666666666666667, 0.9766666666666667, 0.9666666666666667, 0.9566666666666667, 0.9633333333333334, 0.9666666666666667, 0.98]]

# # plot the data
# fig_div = plt.figure()

# for i in range(len(diversity)):
#     plt.plot(range(len(diversity[i])), diversity[i])

# plt.title('Diversity')
# plt.legend(["SGMO"], loc="lower right")

# plt.ylabel("Diversity")
# plt.xlabel("Generation")
# # display the plot
# plt.savefig("Diversity.jpg")


# # plot the data
# fig_avg = plt.figure()

# for i in range(len(avg)):
#     plt.plot(range(len(avg[i])), avg[i])

# plt.title('Average fitness')
# plt.legend(["SGMO"], loc="upper right")
# plt.ylabel("Avg. Fitness")
# plt.xlabel("Generation")

# # save plot
# plt.savefig("Average.jpg")


def getElements(lst, ind):
    return [item[ind] for item in lst]




v1=[[0, 5, 80, 0, 1, 1600, 1, 1, 3, 0.64326, 127979.0, 0.00217033, 5.0262933762570425e-06],
[0, 5, 80, 0, 0, 800, 0, 1, 1, 0.639173, 128071.0, 0.00364291, 4.990770744352742e-06],
[0, 5, 80, 0, 0, 800, 0, 1, 1, 0.639173, 128071.0, 0.00364291, 4.990770744352742e-06],
[0, 5, 20, 0, 0, 1600, 0, 1, 4, 0.629483, 128063.0, 0.00412229, 4.915416630876991e-06],
[0, 5, 20, 0, 0, 1600, 0, 0, 3, 0.628905, 128071.0, 0.00308487, 4.9105964660227536e-06],
[0, 5, 20, 0, 0, 1600, 0, 0, 3, 0.628905, 128071.0, 0.00308487, 4.9105964660227536e-06],
[0, 5, 20, 0, 0, 1600, 0, 0, 3, 0.628905, 128071.0, 0.00308487, 4.9105964660227536e-06],
[0, 5, 20, 0, 0, 1600, 0, 0, 3, 0.628905, 128071.0, 0.00308487, 4.9105964660227536e-06],
[0, 5, 20, 0, 0, 1600, 0, 0, 3, 0.628905, 128071.0, 0.00308487, 4.9105964660227536e-06],
[0, 5, 20, 0, 0, 1600, 0, 0, 3, 0.628905, 128071.0, 0.00308487, 4.9105964660227536e-06],
[0, 5, 20, 0, 0, 1600, 1, 1, 9, 0.569043, 30621.0, 0.750088, 4.906799512758847e-06],
[0, 5, 20, 0, 0, 1600, 1, 1, 9, 0.569043, 30621.0, 0.750088, 4.906799512758847e-06],
[0, 5, 20, 0, 0, 1600, 1, 1, 9, 0.569043, 30621.0, 0.750088, 4.906799512758847e-06],
[0, 5, 20, 0, 0, 1600, 1, 1, 9, 0.569043, 30621.0, 0.750088, 4.906799512758847e-06],
[0, 5, 20, 0, 0, 1600, 1, 1, 9, 0.569043, 30621.0, 0.750088, 4.906799512758847e-06],
[0, 6, 20, 0, 0, 800, 0, 0, 3, 0.626735, 128076.0, 0.00299813, 4.89346169461882e-06],
[0, 6, 20, 0, 0, 800, 0, 0, 3, 0.626735, 128076.0, 0.00299813, 4.89346169461882e-06],
[0, 6, 20, 0, 0, 800, 0, 0, 3, 0.626735, 128076.0, 0.00299813, 4.89346169461882e-06],
[0, 6, 20, 0, 0, 800, 0, 0, 3, 0.626735, 128076.0, 0.00299813, 4.89346169461882e-06],
[0, 6, 20, 0, 0, 800, 0, 0, 3, 0.626735, 128076.0, 0.00299813, 4.89346169461882e-06],
[0, 6, 20, 0, 0, 800, 0, 0, 3, 0.626735, 128076.0, 0.00299813, 4.89346169461882e-06],
[0, 6, 20, 0, 0, 800, 0, 0, 3, 0.626735, 128076.0, 0.00299813, 4.89346169461882e-06],
[0, 6, 20, 0, 0, 800, 0, 0, 3, 0.626735, 128076.0, 0.00299813, 4.89346169461882e-06],
[0, 6, 20, 0, 0, 800, 0, 0, 3, 0.626735, 128076.0, 0.00299813, 4.89346169461882e-06],
[0, 6, 20, 0, 0, 800, 0, 0, 3, 0.626735, 128076.0, 0.00299813, 4.89346169461882e-06],
[0, 6, 20, 0, 0, 800, 0, 0, 3, 0.626735, 128076.0, 0.00299813, 4.89346169461882e-06],
]



v2=[[0, 5, 80, 0, 1, 1600, 1, 1, 3, 0.64326, 127979.0, 0.00217033, 5.037202091560334e-06],
[0, 5, 80, 0, 0, 1600, 0, 1, 1, 0.639973, 128069.0, 0.00295489, 5.011861182784046e-06],
[0, 5, 80, 0, 0, 1600, 0, 1, 1, 0.639973, 128069.0, 0.00295489, 5.011861182784046e-06],
[0, 5, 80, 0, 0, 1600, 0, 1, 1, 0.639973, 128069.0, 0.00295489, 5.011861182784046e-06],
[0, 5, 80, 0, 0, 1600, 0, 0, 1, 0.637756, 128078.0, 0.00327288, 4.995731498440637e-06],
[0, 5, 80, 0, 0, 1600, 0, 0, 1, 0.637756, 128078.0, 0.00327288, 4.995731498440637e-06],
[0, 5, 80, 0, 0, 1600, 0, 0, 1, 0.637756, 128078.0, 0.00327288, 4.995731498440637e-06],
[0, 5, 80, 0, 0, 1600, 0, 0, 1, 0.637756, 128078.0, 0.00327288, 4.995731498440637e-06],
[0, 5, 80, 0, 0, 1600, 0, 0, 1, 0.637756, 128078.0, 0.00327288, 4.995731498440637e-06],
[0, 5, 80, 0, 0, 1600, 0, 0, 1, 0.637756, 128078.0, 0.00327288, 4.995731498440637e-06],
[0, 5, 80, 0, 0, 1600, 0, 0, 1, 0.637756, 128078.0, 0.00327288, 4.995731498440637e-06],
[0, 5, 80, 0, 0, 1600, 0, 0, 1, 0.637756, 128078.0, 0.00327288, 4.995731498440637e-06],
[0, 5, 80, 0, 0, 1600, 0, 0, 1, 0.637756, 128078.0, 0.00327288, 4.995731498440637e-06],
[0, 5, 80, 0, 0, 1600, 0, 0, 1, 0.637756, 128078.0, 0.00327288, 4.995731498440637e-06],
[0, 5, 80, 0, 0, 1600, 0, 0, 1, 0.637756, 128078.0, 0.00327288, 4.995731498440637e-06],
[0, 5, 80, 0, 0, 1600, 0, 0, 1, 0.637756, 128078.0, 0.00327288, 4.995731498440637e-06],
[0, 5, 80, 0, 0, 1600, 0, 0, 1, 0.637756, 128078.0, 0.00327288, 4.995731498440637e-06],
[0, 5, 80, 0, 0, 1600, 0, 0, 1, 0.637756, 128078.0, 0.00327288, 4.995731498440637e-06],
[0, 5, 80, 0, 0, 1600, 0, 0, 1, 0.637756, 128078.0, 0.00327288, 4.995731498440637e-06],
[0, 5, 80, 0, 0, 1600, 0, 0, 1, 0.637756, 128078.0, 0.00327288, 4.995731498440637e-06],
[0, 5, 80, 0, 0, 1600, 0, 0, 1, 0.637756, 128078.0, 0.00327288, 4.995731498440637e-06],
[0, 5, 80, 0, 0, 1600, 0, 0, 1, 0.637756, 128078.0, 0.00327288, 4.995731498440637e-06],
[0, 5, 80, 0, 0, 1600, 0, 0, 1, 0.637756, 128078.0, 0.00327288, 4.995731498440637e-06],
[0, 5, 80, 0, 0, 1600, 0, 0, 1, 0.637756, 128078.0, 0.00327288, 4.995731498440637e-06],
[0, 6, 160, 0, 0, 800, 1, 0, 4, 0.627258, 128077.0, 0.00436679, 4.918893352919104e-06],
[0, 6, 160, 0, 0, 800, 1, 0, 4, 0.627258, 128077.0, 0.00436679, 4.918893352919104e-06]
]



raw_indiv=[v1,v2]

# [energy, throughput, packet_loss, fitness]

filtered_data=[]
for i in range(len(raw_indiv)):
    t_res=[]
    for j in range (len(raw_indiv[i])):
        t_res.append(raw_indiv[i][j][-4:])
    
    filtered_data.append(t_res)

# plot the data
fig_fit = plt.figure()

for i in range(len(filtered_data)):
    plt.plot(range(len(filtered_data[i])), getElements(filtered_data[i], 3))

plt.title('Fitness do melhor individuo')
plt.legend(["EvoMCS_v1", "EvoMCS_v2"], loc="upper right")
plt.ylabel("Fitness")
plt.xlabel("Geração")

# save plot
plt.savefig("Best_fitness_v1.jpg")

# plot the data
fig_plr = plt.figure()

for i in range(len(filtered_data)):
    plt.plot(range(len(filtered_data[i])), getElements(filtered_data[i], 2))

plt.title('PLR Médio do melhor individuo')
plt.legend(["EvoMCS_v1", "EvoMCS_v2"], loc="upper right")
plt.ylabel("Fitness")
plt.xlabel("Geração")

# save plot
plt.savefig("Avg_packet_loss.jpg")


# plot the data
fig_energy = plt.figure()

plt.plot(range(len(filtered_data[0])), getElements(filtered_data[0], 3))
plt.plot(range(len(filtered_data[1])), np.divide(getElements(filtered_data[1], 0), getElements(filtered_data[1],1)))

plt.title('Consumo energético por bit')
plt.legend(["EvoMCS_v1", "EvoMCS_v2"], loc="upper right")
plt.ylabel("Energia (J/bit)")
plt.xlabel("Geração")

# save plot
plt.savefig("Energy_per_bit.jpg")


